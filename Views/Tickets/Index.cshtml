@using Toto_Simulator.Models;
@model PaginatedList<TicketViewModel>
@{
    ViewData["Title"] = "Талони";
}
<div class="d-flex justify-content-around">
    <div class="flex-column" style="width: 20rem;">
        <a asp-controller="Tickets" asp-action="Create" class="btn btn-success mb-2 align-self-auto">Попълни талон</a>
        <a asp-action="Index" asp-route-sortOrder="@ViewData["IdSortParam"]" class="btn btn-outline-success align-self-auto mb-2">Сортирай по номер</a>
    </div>
    <div class="flex-column" style="width: 20rem;">

       <a asp-action="Index" asp-route-pageSize="5" class="btn btn-outline-success mx-2">5</a>
       <a asp-action="Index" asp-route-pageSize="10" class="btn btn-outline-success mx-2">10</a>
       <a asp-action="Index" asp-route-pageSize="15" class="btn btn-outline-success mx-2">15</a>
        
    </div>
    <div class="flex-column" style="width: 20rem;">      
        <span>Печалби: </span> @Model.Last().Owner.Earnings        
    </div>
</div>
<div class="d-flex justify-content-around flex-lg-wrap gap-3">
    @foreach (var ticket in Model)
    {
        <div class="card flex-column" style="width: 20rem;">
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><span class="fw-bold">Номер на талон: </span> @ticket.Id</li>
                <li class="list-group-item"><span class="fw-bold">Дата: </span> @ticket.Date</li>
                <li class="list-group-item"><span class="fw-bold">Цена: </span> : @ticket.Price</li>
                <li class="list-group-item"><span class="fw-bold">Номер на тираж: </span> : @ticket.DrawId</li>
                <li class="list-group-item"><span class="fw-bold">Играч: </span> : @ticket.Owner.UserName</li>
                <li class="list-group-item">
                        <ul class="list-group list-group-horizontal">
                            @foreach (var num in ticket.Numbers)
                            {
                                <li class="list-group-item">@num.Value</li>                
                            }
                        </ul>
                </li>                
            </ul>
        </div>
    }
</div>
@{
    string prevActive = Model.HasPreviousPage ? "active" : "disabled";
    string nextActive = Model.HasNextPage ? "active" : "disabled";

}

<ul class="pagination justify-content-center">
    <li class="page-item @prevActive">
        <a asp-action="Index" asp-route-pageIndex="@(Model.PageIndex - 1)" class="page-link btn-success">Назад</a>
    </li>
    <li class="page-item @nextActive">
        <a asp-action="Index" asp-route-pageIndex="@(Model.PageIndex + 1)" class="page-link btn-success">Напред</a>
    </li>
</ul>